
# Linux信号面面观

## 引子

1. 为什么CTRL-C能杀死进程，但是有时又杀不死？
2. 为什么下班前在服务器的终端起了一个离线脚本，第二天发现脚本早提前退出了？
3. 为什么我的网络服务崩溃了，好像是什么broken pipe？
4. 为什么read系统调用返回-1时可能会把errno设置为EINTR？非阻塞的read有可能设置EINTR吗？
5. 为什么都说信号处理句柄中的逻辑要尽量简单，最好只设置flag？

这些问题都能回答清楚的话，就不用在这里浪费时间了。如果不是，希望本文能够帮到你。

## 什么是信号？

前面的问题都跟Linux信号机制有关。我觉得学习一门知识最重要的是理解概念，理解到位了通常能用一句话阐述概念的本质。

> 信号是进程在用户空间的异步通信机制

#### 异步

异步通信是信号最本质的特性。异步在这里是指不可预知性，你不知道什么时候会来一个消息。举个例子，你正光着膀子在电脑前看电影，突然听到快递小哥的敲门声，这个不在意料之中的敲门声就是异步信号。

#### 用户空间

信号的处理是在用户空间的。这点虽然不是本质特性，但也很重要，信号的处理机制跟它有关系。有一个概念跟信号很相似，但它是在内核空间的。
